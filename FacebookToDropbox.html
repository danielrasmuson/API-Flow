<!DOCTYPE html>
<html ng-app="app">
<head>
    <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="43a7n3papi3g0ez"></script>

    <script>
        function getLastFacebookPhoto(){
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET","https://graph.facebook.com/me/photos/uploaded?access_token=CAACEdEose0cBAPZCZBIlNQafr26iXVG7o5mIzVwimAAEFZCg9ZBLIifIMm2VhQjHw1v3RohqHFsIv2DuraV76w3zRvH3Ckyv61wZBRm0U8VAIoifcpWtT3ZAv9dJFPh9MqKQhFVPdWw0xRyPhwQPF9t891EwzNW17f9r9aR4bKPZAgKaUxJPVZCq7WPEHngZBTCZC7uuDXfTaCCdchOy6v1oZC0EZArG6eX39osZD&fields=source,name", false);
            xmlHttp.send(null);
            return JSON.parse(xmlHttp.responseText);
        }
        var jsonResponse=getLastFacebookPhoto()
        var source = jsonResponse.data[0].source;
        var name = jsonResponse.data[0].name;
        console.log("end of facebook");
    </script>


    <script>
        function savePhotoToDropbox(source, name) {
            var options =
            {
                files: [{'url': source, 'filename': name + '.jpg'}],
                success: function () {
                    alert("Success! Photo saved to Dropbox.");
                },
                progress: function (progress) {
                },
                cancel: function (cancel) {
                },
                error: function (errorMessage) {
                }
            };
            Dropbox.save(options);
        }
        console.log("end of dropbox");
        savePhotoToDropbox(source, name);
    </script>


</head>

<body ng-controller="BodyController">

</body>
</html>